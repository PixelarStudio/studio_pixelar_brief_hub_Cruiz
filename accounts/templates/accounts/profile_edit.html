{% extends "core/base.html" %}
{% block title %}Editar perfil | Pixelar Brief Hub{% endblock %}

{% block content %}
<section class="flex justify-center">
  <div class="w-full max-w-3xl rounded-2xl bg-white p-6 shadow-lg shadow-slate-200 border border-slate-100 space-y-6">
    <header class="flex items-center justify-between gap-3">
      <div>
        <h1 class="text-xl font-semibold text-slate-900">Editar perfil</h1>
        <p class="text-sm text-slate-500">
          Actualizá tus datos personales y la información de tu perfil.
        </p>
      </div>
      <a
        href="{% url 'profile' %}"
        class="inline-flex items-center rounded-lg border border-slate-300 px-3 py-1.5 text-sm text-slate-800 hover:bg-slate-50"
      >
        Volver al perfil
      </a>
    </header>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <fieldset class="space-y-3">
        <legend class="text-sm font-semibold text-slate-700">Datos de usuario</legend>
        <div class="grid gap-3 md:grid-cols-2">
          {% for field in u_form %}
            <div class="space-y-1">
              <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-slate-700">
                {{ field.label }}
              </label>
              {{ field }}
              {% if field.errors %}
                <div class="text-xs text-red-600 space-y-0.5">
                  {% for error in field.errors %}
                    <p>{{ error }}</p>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </fieldset>

      <fieldset class="space-y-3">
        <legend class="text-sm font-semibold text-slate-700">Perfil</legend>
        <div class="grid gap-3 md:grid-cols-2">
          {% for field in p_form %}
            <div class="space-y-1 md:col-span-1 {% if field.name == 'bio' %}md:col-span-2{% endif %}">
              <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-slate-700">
                {{ field.label }}
              </label>
              {{ field }}
              {% if field.name == "avatar" %}
                <p class="text-xs text-slate-500">
                  Imagen cuadrada recomendada (mínimo 256x256px).
                </p>
              {% endif %}
              {% if field.errors %}
                <div class="text-xs text-red-600 space-y-0.5">
                  {% for error in field.errors %}
                    <p>{{ error }}</p>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </fieldset>

      <div class="flex justify-end gap-3">
        <a
          href="{% url 'profile' %}"
          class="inline-flex items-center rounded-lg border border-slate-300 px-4 py-2 text-sm text-slate-800 hover:bg-slate-50"
        >
          Cancelar
        </a>
        <button
          type="submit"
          class="inline-flex items-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-2 focus:ring-offset-white"
        >
          Guardar cambios
        </button>
      </div>
    </form>
  </div>
</section>
{% endblock %}
